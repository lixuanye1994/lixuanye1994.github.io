<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Nanopi neo2 弃坑指南</title>
    <link href="/2021/06/10/Nanopi-neo2-%E5%BC%83%E5%9D%91%E6%8C%87%E5%8D%97/"/>
    <url>/2021/06/10/Nanopi-neo2-%E5%BC%83%E5%9D%91%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h3 id="写在前面："><a href="#写在前面：" class="headerlink" title="写在前面："></a>写在前面：</h3><p>​        偶然间在B站看到了一位大佬<a href="https://www.bilibili.com/video/BV19E411a7Sf">稚晖君</a>的“野生极客工程师” room tour 视频，很是激动和羡慕啊，又注意到超迷你的开发板设备 Nanopi ，这比树莓派等小巧太多了，可装linux系统，那就意味着，可以拥有一台属于自己的Web服务器、FTP服务器、游戏服务器、NAS服务器。。。等等一系列骚操作，小巧省电，性能够用！ 那还不着手搞事情</p><p>​       作为一个立志成为全栈工程师的我，立刻咸鱼入手开始 开发板入坑之旅</p><hr><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><blockquote><p>官方 WIKI <a href="http://wiki.friendlyarm.com/wiki/index.php/NanoPi_NEO2/zh">http://wiki.friendlyarm.com/wiki/index.php/NanoPi_NEO2/zh</a></p><p>新机到手操作</p></blockquote><ul><li><p>烧录系统</p><ul><li><p>下载系统固件</p><p><a href="https://pan.baidu.com/s/1rtZfrVg4fP1WhjlspvfJfA">百度网盘</a>  </p><ul><li>使用镜像 <strong>nanopi-neo2_sd_friendlycore-xenial_4.14_arm64_YYYYMMDD.img.zip</strong> </li><li>烧写工具 <strong>win32diskimager.rar</strong></li><li>完成后插卡上电STAT灯闪烁，成功启动系统。如长期处于红灯状态，需重新烧录系统！</li></ul></li></ul></li><li><p>登录</p><p>烧录系统成功后，这其实就成为一台普通的linux电脑，在linux下先操作好用户账户密码，之后再考虑各种骚操作。以下是个人设置的<strong>普通账户</strong>和<strong>超级账户</strong>：</p><ul><li><p>普通用户：    </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">用户名: <span class="hljs-literal">pi</span><br>密  码: <span class="hljs-number">1994</span><br></code></pre></td></tr></table></figure></li><li><p>Root用户：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">用户名: root<br>密  码: <span class="hljs-symbol">1994lxy@</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>进入系统</p><ul><li><p>软件包源设置成国内：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs linux">$ wget http://wiki.friendlyarm.com/utils/aptsouce.sh<br>$ chmod 755 aptsouce.sh<br>$ sudo -H ./aptsouce.sh<br>$ sudo apt-get update<br><br></code></pre></td></tr></table></figure></li><li><p>安装OLED驱动</p><p>购买的Nanopi 和稚晖君 一直，只是外壳是银色金属，配屏幕128*90像素，后期考虑完成 blackapple…</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">    $ git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/friendlyarm/</span>NanoHatOLED.git<br>    $ cd NanoHatOLED<br>$ sudo -H ./intall.sh<br></code></pre></td></tr></table></figure><p>重启完成</p></li></ul></li></ul><hr><h3 id="部署LAMP-LNMP环境"><a href="#部署LAMP-LNMP环境" class="headerlink" title="部署LAMP/LNMP环境"></a>部署LAMP/LNMP环境</h3><blockquote><p>暂时选择了LAMP环境，Nginx 暂时不熟悉，后面再尝试更换</p><p>已完成通过<a href="http://ingcraft.cn:8888/love.html%E6%9D%A5%E8%AE%BF%E9%97%AE%E6%AD%A4%E6%9C%8D%E5%8A%A1%E5%99%A8">http://ingcraft.cn:8888/love.html来访问此服务器</a></p><p>还部署了自己的毕业设计作品 OA系统通过<a href="http://ingcraft.cn:8888/ml%E6%9D%A5%E8%AE%BF%E9%97%AE">http://ingcraft.cn:8888/ml来访问</a></p></blockquote><ol><li>安装mysql</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ apt-<span class="hljs-builtin-name">get</span> install mysql-server<br>$ apt-<span class="hljs-builtin-name">get</span> install mysql-client<br>账号 root<br>密码 1994lxy@<br></code></pre></td></tr></table></figure><ol start="2"><li>安装apache</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ apt-<span class="hljs-builtin-name">get</span> install apache2<br></code></pre></td></tr></table></figure><ol start="3"><li>安装php</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ apt-<span class="hljs-builtin-name">get</span> install php<br>$ apt-<span class="hljs-builtin-name">get</span> install libapache2-mod-php<br>$ apt-<span class="hljs-builtin-name">get</span> install php7.0-mysql<br></code></pre></td></tr></table></figure><ol start="4"><li>检查</li></ol><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>apache2  -v<br><span class="hljs-variable">$ </span>mysql --version<br><span class="hljs-variable">$ </span>php  -v<br></code></pre></td></tr></table></figure><ol start="5"><li>使用</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs awk">apache 服务<br>查看状态：$ service apache2 status<span class="hljs-regexp">/start/</span>stop/restart<br><br>Web目录： <span class="hljs-regexp">/var/</span>www<br>安装目录： <span class="hljs-regexp">/etc/</span>apache2/<br>全局配置： <span class="hljs-regexp">/etc/</span>apache2/apache2.conf<br>监听端口： <span class="hljs-regexp">/etc/</span>apache2/ports.conf<br>虚拟主机： <span class="hljs-regexp">/etc/</span>apache2<span class="hljs-regexp">/sites-enabled/</span><span class="hljs-number">000</span>-default.conf<br>web服务器安装完毕：内网通过内网地址访问，外网通过域名映射访问：http:<span class="hljs-regexp">//i</span>ngcraft.cn:<span class="hljs-number">8888</span>/<br>mysql 服务<br>查看状态：$ service mysql status<span class="hljs-regexp">/start/</span>stop/restart<br>---------------<br>mysql允许远程连接设置：<br>设置bind address：<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> 删除或者注释 共有两处修改好必须重启！！！<br>地址：<span class="hljs-regexp">/etc/my</span>sql<span class="hljs-regexp">/mysql.conf.d/my</span>sqld.cnf<br><br>php 服务<br>查看php-fpm是否开启<br>命令：ps -ef | grep php<br>查看php-fpm的位置<br>命令：whereis php-fpm<br>开启php-fpm<br>sudo <span class="hljs-regexp">/etc/i</span>nit.d/php7.<span class="hljs-number">0</span>-fpm start<br><br>————————————————<br>修改权限<br>$ sudo chmod <span class="hljs-number">777</span> <span class="hljs-regexp">/var/</span>www<br>----------------<br>安装phpMyAdmin<br>$ sudo apt-get install phpmyadmin<br>安装完成，访问路径：http:<span class="hljs-regexp">//</span>localhost<span class="hljs-regexp">/phpmyadmin/i</span>ndex.php<br>----------------<br>配置apache<br>$ vim <span class="hljs-regexp">/etc/</span>apache2/apache2.conf<br> <br>末尾添加：<br> <br>include <span class="hljs-regexp">/etc/</span>phpmyadmin/apache.conf<br> <br>AddType application/x-httpd-php .php .htm .html<br> <br>AddDefaultCharset UTF-<span class="hljs-number">8</span><br>————————————————<br>网站目录 <br><span class="hljs-regexp">/var/</span>www/html<br><br>-----------------<br></code></pre></td></tr></table></figure><hr><h3 id="部署FTP服务器"><a href="#部署FTP服务器" class="headerlink" title="部署FTP服务器"></a>部署FTP服务器</h3><blockquote><p>配置好了WEB服务器，那就需要考虑文件传输到服务器上了，根据万能百度的方案，选择了vsftpd 作为linux服务器上的FTP办法</p></blockquote><ol><li>安装vsftpd服务器</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo apt-<span class="hljs-builtin-name">get</span> install vsftpd<br></code></pre></td></tr></table></figure><ol start="2"><li>配置vsftpd.conf文件</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo vi /etc/vsftpd.conf<br><br>设置以下允许<br><span class="hljs-attribute">local_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">write_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">chroot_local_user</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">chroot_list_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-comment"># (default follows) 允许chroot_list文件中配置的用户登录此ftp服务器。</span><br><span class="hljs-attribute">chroot_list_file</span>=/etc/vsftpd.chroot_list<br><br>---------------------<br>配置ftp服务器的上传下载文件所在的目录。<br><span class="hljs-attribute">local_root</span>=/var/www/html【例】<br>------------------<br></code></pre></td></tr></table></figure><ol start="3"><li>给ftp服务器配置使用用户等信息（此处操作没有正常实现，暂时记录备份，后面再做调整）</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ vi <span class="hljs-regexp">/etc/</span>vsftpd.chroot_list<br>$ cd <span class="hljs-regexp">/var/</span>www/html<br>$ mkdir -p share 建立一个share文件夹<br>$ sudo <span class="hljs-regexp">/etc/i</span>nit.d/vsftpd restart 重启ftp<br></code></pre></td></tr></table></figure><p>​    4.ftp服务器搭建完毕后通过地址 <a href="ftp://ingcraft.cn/">ftp://ingcraft.cn</a> 访问，ftp默认端口号21，在主路由中端口映射需要正确填入，但是在实际访问中可以省略（此处废话连篇）</p><hr><h3 id="Python系列"><a href="#Python系列" class="headerlink" title="Python系列"></a><strong>Python系列</strong></h3><blockquote><p>Python系列为后期各种基于python项目做准备，毕竟这台小设备，24小时供电，如有部署需求，当然是要压榨这台Nanopi的。</p></blockquote><p>因为linux是默认安装 python 2.7 和 python 3.5 双版本的，输入指令 python 进入的是 python2.7,输入python3才是进入3.5，考虑到平时和未来都是用python3以上版本，所以可以通过一下两条指令使 python 指令优先进入3.5：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo update-alternatives --install <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python python /u</span>sr<span class="hljs-regexp">/bin/</span>python2 <span class="hljs-number">100</span> <br>sudo update-alternatives --install <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python python /u</span>sr<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-number">150</span><br></code></pre></td></tr></table></figure><h4 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装 pip"></a>安装 pip</h4><p>pip用来下载安装和管理python的各种第三方库非常方便！</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-builtin-name">get</span> install python3-pip<br></code></pre></td></tr></table></figure><p>各种刷屏后（可能有按 Y 确认输入）,输入以下指令,注意这里使用pip的指令是 pip3，不是pip</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">pip3</span> -V<br></code></pre></td></tr></table></figure><p>卡顿几秒后，没有报错，打印出pip版本，恭喜，pip到此安装完成！</p><p> 升级pip，升级完之后直接输 pip 也能调用 pip3 了</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip3 <span class="hljs-keyword">install</span> –upgrade pip<br></code></pre></td></tr></table></figure><p>升级失败！以后研究 之后安装都为pip3 xxxx xxxx</p><h4 id="pip安装第三方模块"><a href="#pip安装第三方模块" class="headerlink" title="pip安装第三方模块"></a>pip安装第三方模块</h4><p>用pip安装python的串口模块试试</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip3 <span class="hljs-keyword">install</span> pyserial<br></code></pre></td></tr></table></figure><p><img src="https://img2018.cnblogs.com/blog/1560141/201812/1560141-20181222164159931-1376820614.png" alt="img"></p><p>进入python试试模块是否能用,无报错成功</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">python</span><br><span class="hljs-keyword">import</span> serial<br></code></pre></td></tr></table></figure><hr><h3 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h3><p>到此，LAMP服务器+FTP服务器已完全结束，虽然中途还有多出BUG和功能没有实现，但大体方法都基本完成，正式投入使用。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/06/10/hello-world/"/>
    <url>/2021/06/10/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
